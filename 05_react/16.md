<h1>Projeto Blog Pessoal - P√°gina de Cadastro - L√≥gica</h1>



Vamos implementar a l√≥gica do Componente, que ser√° respons√°vel por consumir o Recurso Usuario do nosso Backend. O Componente Cadastro ir√° consumir o M√©todo **Cadastrar Usu√°rio** do Backend do Blog Pessoal, cuja a fun√ß√£o √© persistir os dados de um novo usu√°rio no Banco de dados. 

<br />

<h2>üë£ Passo 01 - Iniciar o Backend no Render</h2>



No Bloco 02, realizamos o **deploy do Backend** no Render. Como estamos utilizando uma **conta gratuita**, existe uma limita√ß√£o importante: se a API permanecer aproximadamente **15 minutos sem receber requisi√ß√µes HTTP**, o Render suspende a aplica√ß√£o para economizar recursos do servidor. A aplica√ß√£o s√≥ ser√° reiniciada quando uma nova requisi√ß√£o chegar.

Esse comportamento pode **atrasar o desenvolvimento**, especialmente quando precisamos testar o cadastro de usu√°rios v√°rias vezes seguidas. Para contornar isso, podemos manter o Render ‚Äúacordado‚Äù enviando requisi√ß√µes HTTP autom√°ticas e repetidas, atrav√©s do **Insomnia**, simulando acessos peri√≥dicos √† API.

1. Acesse o site do **[Render](https://render.com)**
2. Fa√ßa o login utilizando a sua conta criada no Render.
3. No **Dashboard do Render**, clique no Servi√ßo do Blog Pessoal:

<div align="center"><img src="https://i.imgur.com/w2Bh3Sx.png" title="source: imgur.com" /></div>

4. Na sequ√™ncia, clique no link do seu Deploy, para inicializar a sua API:

<div align="center"><img src="https://i.imgur.com/TlY7nP5.png" title="source: imgur.com" /></div>

5. Depois que a API carregar, abra o **Insomnia** e acesse a Collection **Blog Pessoal**.
6. Clique na pasta **Blog Pessoal - Render (c√≥pia das Requisi√ß√µes com o endere√ßo do Render)** e abra a Requisi√ß√£o **Autenticar Usu√°rio**, dentro da pasta **Usu√°rio**.
7. Fa√ßa o Login utilizando o usu√°rio padr√£o **root@root.com** ou **root@root.com.br**:

<div align="center"><img src="https://i.imgur.com/KQJMson.png" title="source: imgur.com" /></div>

8. Copie o Token da Requisi√ß√£o **Autenticar Usu√°rio** e atualize o Token da Requisi√ß√£o **Listar todos os Usu√°rios** da pasta **Render**.
9. Teste a Requisi√ß√£o **Listar todos os Usu√°rios** e verifique se a Lista de usu√°rios foi exibida.

Na sequ√™ncia, vamos configurar o Insomnia para enviar esta Requisi√ß√£o automaticamente a cada 300 segundos (5 minutos):

1. Na Requisi√ß√£o **Listar todos os Usu√°rios**, observe que ao lado do bot√£o **Send**, tem uma seta, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/PfauCMU.png" title="source: imgur.com" /></div>

2. Clique nesta seta e selecione a op√ß√£o **Repeat on Interval**

<div align="center"><img src="https://i.imgur.com/zqB3MPz.png" title="source: imgur.com" /></div>

3. Na janela **Send on Interval**, indique o tempo de intervalo (**300 segundos**), como mostra a imagem abaixo e clique no bot√£o **Start** para come√ßar o envio autom√°tico.

<div align="center"><img src="https://i.imgur.com/fOHQxsv.png" title="source: imgur.com" /></div>

4. Durante **1 hora** (tempo de expira√ß√£o do Token), o Insomnia enviar√° a Requisi√ß√£o para o Deploy no Render a cada 5 minutos. Ap√≥s este per√≠odo, o Insomnia come√ßar√° a receber Respostas HTTP indicando que o token expirou e o envio autom√°tico ser√° finalizado. 
5. Para continuar o envio autom√°tico da Requisi√ß√£o depois que o Token expirar:
   - Refa√ßa o Login;
   - Atualize o Token da Requisi√ß√£o **Listar todos os Usu√°rios**; 
   - Configure novamente o envio autom√°tico, atrav√©s da op√ß√£o **Send on Interval** da Requisi√ß√£o **Listar todos os Usu√°rios**.

<br />

<h2>üë£ Passo 02 - Instalar a Biblioteca React Spinners</h2>



Antes de atualizarmos o Componente **Cadastro**, precisamos instalar o pacote **React Spinners**, respons√°vel por fornecer um componente de carregamento de conte√∫do (Loader), que ser√° utilizado para indicar ao usu√°rio que uma opera√ß√£o ass√≠ncrona ainda n√£o foi conclu√≠da e precisa aguardar que o processamento seja conclu√≠do.

> **Loader** √© um elemento visual utilizado em p√°ginas da web para fornecer feedback visual aos usu√°rios durante o processo de carregamento de uma p√°gina ou a espera pela resposta de uma Requisi√ß√£o HTTP, por exemplo. Essas anima√ß√µes ajudam a tornar a espera mais agrad√°vel e envolvente. Quando voc√™ acessa um site e v√™ um √≠cone girat√≥rio ou uma barra de progresso enquanto o conte√∫do est√° sendo carregado, s√£o bons exemplos de um CSS Loader.
>
> **Exemplos de CSS Loaders:**
>
> | <img src="https://i.imgur.com/Q9SSgha.gif" title="source: imgur.com" /> | <img src="https://i.imgur.com/ACNBnkx.gif" title="source: imgur.com" /> | <img src="https://i.imgur.com/cWKUASE.gif" title="source: imgur.com" /> |
> | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
>
> 

1. Para instalar a Biblioteca **React Spinners**, abra o Terminal do Visual Studio Code
2. Digite o comando abaixo:

```bash
npm install react-spinners --save
```

<br />

> [!IMPORTANT]
>
> **A vers√£o atual Biblioteca React Spinners pode ser diferente da vers√£o instalada, quando este material foi escrito.**

<br />

<div align="left"><img src="https://i.imgur.com/yVXGtb2.png" title="source: imgur.com" width="4%"/> <a href="https://mhnpd.github.io/react-loader-spinner/docs/intro" target="_blank"><b>React Loader Spinners - Documenta√ß√£o Oficial</b></a></div>

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/>Passo 03 - Implementar a L√≥gica do Componente Cadastro</h2>



1. Abra o componente **Cadastro.tsx** localizado dentro da pasta **src/pages/cadastro**.
2. Localize o trecho de c√≥digo indicado na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/uzKn7m4.png" title="source: imgur.com" /></div>

3. No local indicado na imagem acima, insira o c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/I7bfePb.png" title="source: imgur.com" /></div>

4. N√£o esque√ßa de fazer as respectivas importa√ß√µes dos componentes e bibliotecas.

**Vamos analisar as altera√ß√µes realizadas no c√≥digo:**

<div align="center"><img src="https://imgur.com/3M3902A.png" title="source: imgur.com" /></div>

**Linhas 01 a 04:** Importamos os **Componentes**, **Interfaces** e **Fun√ß√µes** necess√°rias para a constru√ß√£o do **Componente Cadastro**.

<br />

> [!IMPORTANT]
>
> Note que al√©m do tipo `Usuario`, os tipos **`ChangeEvent`** e **`FormEvent`** s√£o importados usando a palavra-chave **`type`**, porque se tratam de **tipos do TypeScript** e n√£o de valores ou fun√ß√µes que ser√£o executados.
>
> Isso ajuda a otimizar a compila√ß√£o e deixa expl√≠cito que estamos apenas utilizando essas defini√ß√µes para **tipagem de eventos em formul√°rios** no React.

<br />

<div align="center"><img src="https://i.imgur.com/8WJYZ4W.png" title="source: imgur.com" /></div>

**Linha 08:** Criamos a constante **`navigate`**, definida como uma fun√ß√£o que utiliza o **hook `useNavigate()`**. Atrav√©s de **`navigate`**, o usu√°rio poder√° ser redirecionado para outras rotas da aplica√ß√£o, conforme a necessidade.

<br />

> [!TIP]
>
> **Caso voc√™ tenha alguma d√∫vida em rela√ß√£o ao Hook useNavigate(), consulte o conte√∫do sobre Rotas, clicando <a href="09.md">aqui</a>.**

<br />

**Linha 10:** Criamos um Estado chamado **`isLoading`**, do tipo **boolean**, utilizando o Hook **`useState`**, com valor inicial **`false`**.

Este Estado controla a exibi√ß√£o do **Loader** (da biblioteca **React Spinners**) enquanto aguardamos a resposta do Backend ao enviar a Requisi√ß√£o para **Cadastrar Usu√°rio**.

- Enquanto a Requisi√ß√£o estiver pendente, **`isLoading`** ser√° **`true`**, exibindo o Loader.
- Quando a Requisi√ß√£o for conclu√≠da, **`isLoading`** ser√° **`false`**, encerrando a anima√ß√£o do Loader.

A fun√ß√£o **`setIsLoading`** √© utilizada para atualizar o valor do Estado, seguindo a sintaxe b√°sica do **Hook `useState`**.

<br />

> [!TIP]
>
> **Caso voc√™ tenha alguma d√∫vida em rela√ß√£o ao Hook useState, consulte o conte√∫do sobre Hooks, clicando <a href="05.md">aqui</a>.**

<br />

**Linha 12:** Criamos um Estado chamado **`confirmaSenha`**, do tipo **string**, com valor inicial **vazio**, atrav√©s do Hook **`useState`**.

Este Estado armazena o valor do input **`confirmarSenha`** do formul√°rio e ser√° utilizado para comparar os campos **senha** e **confirmarSenha**:

- Se os valores forem iguais, a Requisi√ß√£o de Cadastro ser√° enviada para o Backend.
- Caso contr√°rio, ser√° exibida uma mensagem solicitando que o usu√°rio digite novamente a senha e a confirma√ß√£o.

A fun√ß√£o **`setConfirmarSenha`** √© usada para atualizar o valor deste Estado.

**Linhas 14 a 20:** Criamos um Estado chamado **`usuario`**, do tipo **`Usuario`** (Interface Model), utilizando o Hook **`useState`**, com todos os atributos inicializados com **valores vazios ou zero**, conforme suas tipagens.

A fun√ß√£o **`setUsuario`** √© usada para atualizar o Estado, seguindo a sintaxe padr√£o do **Hook `useState`**.

O **objetivo do Estado `usuario`** √© armazenar todas as informa√ß√µes digitadas pelo usu√°rio no formul√°rio, que ser√£o enviadas para o Backend ao cadastrar um novo usu√°rio na aplica√ß√£o.

<div align="center"><img src="https://i.imgur.com/VtbT4Jb.png" title="source: imgur.com" /></div>

**Linhas 22 a 26:** Adicionamos o **Hook `useEffect`**, que ser√° executado sempre que houver uma altera√ß√£o no Estado **`usuario`**.

Dentro do Hook, criamos uma **estrutura condicional** que verifica se o atributo **id** do usu√°rio permanece com o valor inicial (zero).

- Se o **id** for **diferente de zero**, significa que o usu√°rio foi cadastrado com sucesso, j√° que o Banco de Dados retornou uma **chave prim√°ria (ID)**.
- Se o **id** continuar como zero, o cadastro **n√£o foi realizado com sucesso**.

Quando o cadastro for conclu√≠do com sucesso, chamamos a fun√ß√£o **`retornar()`**, que redireciona o usu√°rio para a p√°gina de login, para que ele possa acessar a aplica√ß√£o.

<br />

> [!TIP]
>
> **Caso voc√™ tenha alguma d√∫vida em rela√ß√£o ao Hook useEffect, consulte o conte√∫do sobre Hooks, clicando <a href="05.md">aqui</a>.**

<br />

**Linhas 28 a 30:** Criamos a fun√ß√£o **`retornar()`**, respons√°vel por redirecionar o usu√°rio ao Componente **Login** ap√≥s o cadastro bem-sucedido. Esse redirecionamento √© feito pela fun√ß√£o **`navigate()`**, que recebe como par√¢metro a rota **`/login`**.

Al√©m disso, o bot√£o **Cancelar** do formul√°rio tamb√©m utiliza essa fun√ß√£o, permitindo que o usu√°rio volte √† tela de Login caso desista de finalizar o cadastro.

<div align="center"><img src="https://i.imgur.com/GP7zUbn.png" title="source: imgur.com" /></div>

**Linhas 32 a 38:** Criamos a fun√ß√£o **`atualizarEstado(e: ChangeEvent<HTMLInputElement>)`**, respons√°vel por atualizar dinamicamente o Estado **`usuario`** conforme o usu√°rio digita nos campos do formul√°rio.

Essa fun√ß√£o ser√° vinculada ao evento **onChange** de todos os inputs, exceto **confirmarSenha**, mantendo o valor digitado sempre atualizado no Estado `usuario`.

Sempre que um **input** tiver o valor modificado (evento **onChange**), a fun√ß√£o cria um **novo objeto `usuario`**, mantendo os valores j√° existentes atrav√©s do **Spread Operator**, e substituindo apenas o atributo relacionado ao input alterado.

O uso do tipo **`ChangeEvent<HTMLInputElement>`** √© fundamental. Ele garante que o argumento **e** (evento) seja tratado como um evento de mudan√ßa de um elemento **input HTML**, fornecendo acesso seguro a propriedades como **`e.target.name`** e **`e.target.value`**. Isso evita erros de tipagem e deixa o c√≥digo mais claro.

Como todos os **inputs** possuem um atributo **`name`** com os mesmos nomes dos atributos do objeto **`usuario`** (definidos no Model **Usuario**), conseguimos atualizar o Estado de forma **din√¢mica e escal√°vel**.

**Linha 35:** Definimos a assinatura da fun√ß√£o `atualizarEstado()`, recebendo o argumento **e** do tipo **`ChangeEvent<HTMLInputElement>`**. Esse tipo √© importado com **`type`**, pois trata-se de uma **tipagem do React**.

> [!NOTE]
>
> O **HTMLInputElement** √© um componente interno utilizado pelo React para renderizar diferentes tipos de campos de entrada em um formul√°rio HTML, como textos, n√∫meros, senhas ou seletores. Ele pode ser transformado em um **input controlado**, quando voc√™ define valores expl√≠citos para suas propriedades (como `id`, `name` e `value`) e adiciona um manipulador de eventos, como o **onChange**, que acompanha todas as altera√ß√µes feitas pelo usu√°rio no campo de entrada.
>
> O **ChangeEvent** no React √© um tipo gen√©rico que representa um evento de mudan√ßa em elementos do DOM. Ele √© amplamente utilizado para capturar e tratar intera√ß√µes do usu√°rio, como digitar em um campo de texto ou selecionar uma op√ß√£o em um `<select>`. Sempre que o valor de um input muda, esse evento √© disparado, permitindo que o desenvolvedor implemente regras de neg√≥cio, atualize o **estado** do componente ou valide os dados inseridos.
>
> Em resumo, o **ChangeEvent** √© uma ferramenta essencial para gerenciar entradas do usu√°rio em aplica√ß√µes React, garantindo que a interface permane√ßa sincronizada com o estado da aplica√ß√£o e possibilitando a implementa√ß√£o de valida√ß√µes e outras l√≥gicas conforme necess√°rio.

**Linha 36:** Chamamos a fun√ß√£o **`setUsuario`** para atualizar o objeto `usuario`.

**Linha 37:** Usamos o **Spread Operator (`...usuario`)** para manter os valores anteriores e atualizar apenas o campo que sofreu altera√ß√£o.

> [!NOTE]
>
> O **Spread Operator (`...`)** √© uma sintaxe do JavaScript/TypeScript que permite expandir objetos ou arrays.
>
> No Componente Cadastro, ele √© utilizado para **clonar o objeto `usuario`** e aplicar apenas as altera√ß√µes necess√°rias, seguindo o princ√≠pio da **imutabilidade**, essencial em React.
>
> <br />
>
> <div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="4%"/> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank"><b>JavaScript - Operador Spread</b></a></div>
>
> <br />

**Linha 38:** Definimos dinamicamente qual atributo ser√° atualizado, com base no **`e.target.name`**, e atribuimos o novo valor **`e.target.value`**.

> ‚úÖ **Exemplo pr√°tico:**
>
> Se o usu√°rio alterar o valor do input **nome**, um novo objeto `usuario` ser√° criado, mantendo todos os outros atributos iguais, mas substituindo o valor de **nome** pelo que foi digitado.

<br />

> [!NOTE]
>
> ## Trabalhando com eventos no React
>
> Os eventos no **React** s√£o fundamentais para lidar com as intera√ß√µes do usu√°rio em aplica√ß√µes web. Embora o processo de manipula√ß√£o de eventos seja muito parecido com o uso direto de eventos do DOM, existem algumas diferen√ßas importantes que tornam o React mais consistente e seguro em diferentes navegadores.
>
> No React, os eventos s√£o representados por **SyntheticEvents**, que funcionam como uma camada de abstra√ß√£o em torno dos eventos nativos do navegador. Essa abordagem garante que os eventos sejam tratados de forma padronizada, independentemente do navegador em que a aplica√ß√£o esteja sendo executada.
>
> No caso da fun√ß√£o **`atualizarEstado()`**, utilizada no Componente **Cadastro**, √© definido um argumento chamado **`e`** (abrevia√ß√£o de *event*). Esse argumento representa o evento disparado e fornece acesso ao elemento do formul√°rio que originou a a√ß√£o ‚Äî no caso, os inputs (`HTMLInputElement`).
>
> Dentro do evento, temos algumas propriedades importantes:
>
> - **`event.target.name`** ‚Üí corresponde ao atributo `name` do elemento `<input>` que disparou o evento **onChange**. Ele indica **qual campo do formul√°rio foi alterado**.
> - **`event.target.value`** ‚Üí corresponde ao valor atual (`value`) digitado ou selecionado pelo usu√°rio no elemento `<input>` que disparou o evento.
>
> Assim, ao manipular o evento **onChange**, conseguimos identificar **qual campo foi alterado** e **qual o novo valor digitado**, permitindo atualizar dinamicamente o estado da aplica√ß√£o.

<br />

**Linhas 40 a 42:** Criamos a fun√ß√£o **`handleConfirmarSenha(e: ChangeEvent<HTMLInputElement>)`**, que atualiza o Estado **`confirmarSenha`** sempre que o usu√°rio digitar algo no campo de confirma√ß√£o de senha.

Assim como a fun√ß√£o anterior, o **tipo ChangeEvent** garante que estamos lidando corretamente com eventos de inputs HTML.

Essa fun√ß√£o ser√° vinculada ao evento **onChange** do input **confirmarSenha**, mantendo o valor digitado sempre atualizado no Estado.

<div align="center"><img src="https://i.imgur.com/vHHUTgh.png" title="source: imgur.com" /></div>

**Linhas 44 a 64:** Define a fun√ß√£o **cadastrarNovoUsuario**, que √© respons√°vel por **gerenciar todo o processo de cadastro de um novo usu√°rio** na aplica√ß√£o.

**Linha 44:** Na assinatura da fun√ß√£o, declaramos o argumento **e** (evento), do tipo **FormEvent<HTMLFormElement>**, que representa o envio do formul√°rio.

No Projeto Blog Pessoal, isso significa que **toda vez que o formul√°rio for enviado** (clicando no bot√£o **Cadastrar**, por exemplo), o evento **onSubmit** ser√° disparado e, consequentemente, acionar√° a fun√ß√£o **cadastrarNovoUsuario**.

A palavra-chave **async** indica que a fun√ß√£o √© **ass√≠ncrona**. Isso √© obrigat√≥rio, j√° que utilizaremos m√©todos do **Axios**, que retornam **Promises** (opera√ß√µes ass√≠ncronas).

> [!NOTE]
>
> ### **FormEvent no React**
>
> O **FormEvent** no **React** √© um tipo gen√©rico que representa eventos relacionados a formul√°rios. Ele √© muito utilizado no evento `onSubmit`, que ocorre quando o usu√°rio envia um formul√°rio.
>
> Esse tipo √© √∫til porque garante seguran√ßa de tipos (**TypeScript**) e facilita o trabalho com valida√ß√£o, atualiza√ß√£o de estado e manipula√ß√£o de dados do formul√°rio.
>
> O **HTMLFormElement** √© uma interface do **DOM** que representa um elemento `<form>`. Com ele, √© poss√≠vel acessar e manipular os campos, propriedades e m√©todos do formul√°rio.
>
> O evento **onSubmit** √© acionado quando o usu√°rio envia um formul√°rio ‚Äî seja clicando no bot√£o de envio ou pressionando a tecla **Enter** dentro de um campo de entrada.
>
> Ele √© essencial para:
>
> - Validar dados do formul√°rio;
> - Atualizar estados no React;
> - Enviar informa√ß√µes para o backend.
>
> üëâ Assim, o `FormEvent`, o `HTMLFormElement` e o evento `onSubmit` trabalham juntos para fornecer controle total sobre formul√°rios em aplica√ß√µes **React**.

<br />

**Linha 45:** Por padr√£o, ao enviar um formul√°rio HTML, o navegador recarrega a p√°gina inteira para atualizar a DOM.
 No entanto, em aplica√ß√µes **SPA (Single Page Application)**, como o React, **n√£o deve haver recarregamento completo**, mas sim atualiza√ß√µes pontuais via **Virtual DOM**.

Para evitar a perda de dados e impedir o reload, utilizamos:

```typescript
e.preventDefault();
```

Isso garante que a l√≥gica da fun√ß√£o **cadastrarNovoUsuario** seja executada corretamente sem recarregar a p√°gina.

**Linha 47:** A estrutura condicional **if** verifica se a senha digitada no input **senha** e a senha digitada no input **confirmarSenha** s√£o iguais, al√©m de verificar se as senhas possuem pelo menos 8 caracteres. 

Se estas 2 condi√ß√µes forem satisfeitas, o c√≥digo dentro da estrutura conficional ser√° executado. 

**Linha 49:** A fun√ß√£o **setIsLoading(true)** altera o Estado **isLoading** para `true`, exibindo o **Loader** e indicando que a requisi√ß√£o est√° em andamento.

**Linhas 51 a 56:** Adicionamos a estrutura de tratamento de erros Try/Catch para lidarmos com os erros que possam acontecer ao enviarmos a Requisi√ß√£o POST para o Backend.

**Linha 52:** Chamamos a fun√ß√£o **cadastrarUsuario**, definida no **Service**, passando como par√¢metros:

- O endpoint `/usuarios/cadastrar`;
- O Estado **usuario**, com os dados preenchidos no formul√°rio;
- A fun√ß√£o **setUsuario**, para atualizar o Estado com a resposta do backend.

O comando **await** garante que a execu√ß√£o espere a resposta do servidor antes de prosseguir. Enquanto isso, outras partes da aplica√ß√£o continuam funcionando normalmente.

**Linha 53:** Se o processo for bem-sucedido, exibimos um **alerta de sucesso** informando que o usu√°rio foi cadastrado.

**Linha 55:** Caso ocorra algum erro, ele ser√° capturado, evitando falhas graves na aplica√ß√£o, e exibindo um **alerta de erro** ao usu√°rio.

**Linhas 57 a 61:** Caso as condi√ß√µes de senha n√£o sejam atendidas (senhas diferentes ou com menos de 8 caracteres), a estrutura **else** ser√° executada:

- Exibe um alerta ao usu√°rio;
- Reseta os campos relacionados √† senha;
- Finaliza o processo de carregamento.

**Linha 63:** Por fim, independentemente de sucesso ou erro, o Estado **isLoading** √© atualizado para `false`, ocultando o Loader e concluindo o processo.

üëâ Esse passo garante uma experi√™ncia fluida para o usu√°rio, combinando **valida√ß√£o de dados**, **tratamento de erros** e **atualiza√ß√£o de estado** de forma eficiente.

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/>Passo 04 - Conectar a L√≥gica do Componente com o Formul√°rio</h2>



Agora que criamos a L√≥gica do Componente **Cadastro**, vamos conectar o formul√°rio com a l√≥gica do componente:

1. Vamos importar o componente `ClipLoader` da biblioteca **React Spinners**, como indicado na imagem abaixo:

<div align="center"><img src="https://i.imgur.com/WUX5Gtd.png" title="source: imgur.com" /></div>

2. Localize o trecho de c√≥digo abaixo, que inicializa o elemento `form`:

<div align="center"><img src="https://i.imgur.com/wB9JhRT.png" title="source: imgur.com" /></div>

3. Vamos adicionar o **evento `onSubmit`** para acionar a fun√ß√£o `cadastrarNovoUsuario`, conforme o c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/JIjS1KA.png" title="source: imgur.com" /></div>

**Linha 76:** Ao adicionarmos o **evento `onSubmit`** ao formul√°rio, passando a fun√ß√£o **`cadastrarNovoUsuario`** como argumento, o seguinte fluxo ser√° constru√≠do:

- Quando o usu√°rio clicar no bot√£o **Cadastrar**, o evento **submit** do formul√°rio ser√° disparado;
- O formul√°rio ser√° enviado de forma controlada pelo React;
- A fun√ß√£o `cadastrarNovoUsuario` ser√° executada, realizando uma **requisi√ß√£o POST** contendo os dados do novo usu√°rio;
- Essa requisi√ß√£o tentar√° efetivar o cadastro do novo usu√°rio no Backend da aplica√ß√£o.

<br />

> [!TIP]
>
> No React, o `onSubmit` √© a forma recomendada de capturar o envio de formul√°rios, permitindo validar e processar os dados antes de envi√°-los.

<br />

4. Localize o trecho de c√≥digo abaixo, que cont√©m o elemento `input`, que receber√° o **Nome do Usu√°rio**:

<div align="center"><img src="https://i.imgur.com/dr4pAb4.png" title="source: imgur.com" /></div>

5. Vamos adicionar a **propriedade `value`** ao input, associando-a ao atributo `nome` do estado `usuario`, e o **evento `onChange`** para disparar a fun√ß√£o `atualizarEstado`, conforme indicado no c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/3CX2ldp.png" title="source: imgur.com" /></div>

**Linha 87:** Atrav√©s da propriedade `value`, estamos definindo que o valor dentro deste input ser√° sempre o mesmo que estiver armazenado na propriedade `nome` do estado **usuario**. Isso garante que o input seja um **componente controlado**, mantendo o valor sincronizado com o estado do React.

**Linha 88:** Ao adicionarmos o **evento `onChange`** no input `nome`, passando a fun√ß√£o **`atualizarEstado`** como argumento, o seguinte fluxo ser√° constru√≠do:

- O usu√°rio digita algo no campo `nome`;
- O evento **onChange** √© disparado, acionando a fun√ß√£o **`atualizarEstado`**;
- A fun√ß√£o **`atualizarEstado`** atualiza o valor do atributo `nome` no estado **usuario** com o novo valor digitado;
- Os demais atributos do estado **usuario** permanecem inalterados;
- O React re-renderiza o input, garantindo que a propriedade **`value`** esteja sempre sincronizada com o estado.

> Esse fluxo caracteriza o input como um **componente controlado**, mantendo a consist√™ncia entre o valor exibido no campo e o estado da aplica√ß√£o.

A vari√°vel `e` (event) armazena informa√ß√µes sobre o input que disparou o evento **onChange**. Ela √© passada como argumento para a fun√ß√£o **`atualizarEstado`**, permitindo que a fun√ß√£o identifique **qual atributo do estado `usuario` deve ser atualizado**.

Isso funciona porque a **propriedade `name` do input** corresponde exatamente ao nome do atributo no estado **usuario**. Assim, a fun√ß√£o consegue atualizar apenas o campo correto, mantendo os demais atributos do estado inalterados.

6. Fa√ßa as mesmas altera√ß√µes nos inputs `usuario`, `foto` e `senha`, como vemos indicado no c√≥digo abaixo, alterando apenas o atributo que ser√° associado a cada input:

<div align="center"><img src="https://i.imgur.com/czpNlBm.png" title="source: imgur.com" /></div>

<br />

> [!WARNING]
>
> √â fundamental que as propriedades **`name`** e **`id`** de cada input estejam configuradas com o **mesmo nome do atributo** do estado associado √† propriedade **`value`**.
>
> Isso garante que a fun√ß√£o de atualiza√ß√£o do estado (**`atualizarEstado`**) consiga identificar corretamente qual campo deve ser modificado, evitando inconsist√™ncias e erros de sincroniza√ß√£o entre o input e o estado do React.

<br />

7. No input `confirmarSenha`, vamos adicionar a **propriedade `value`**, vinculando-a ao estado **`confirmarSenha`**, e o **evento `onChange`** para disparar a fun√ß√£o de atualiza√ß√£o de estado **`setConfirmarSenha`**, conforme indicado no c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/J87hZ6Q.png" title="source: imgur.com" /></div>

**Linha 135:** Atrav√©s da propriedade `value`, estamos definindo que o valor dentro deste input ser√° sempre o mesmo que estiver armazenado no estado **confirmarSenha**. Isso garante que o input seja um **componente controlado**, mantendo o valor sincronizado com o estado do React.

**Linha 136:** Ao adicionarmos o **evento `onChange`** no input `confirmarSenha`, passando a fun√ß√£o de atualiza√ß√£o de estado **`setConfirmarSenha`** como argumento, o seguinte fluxo ser√° constru√≠do:

- O usu√°rio digita algo no campo `confirmarSenha`;
- O evento **onChange** √© disparado, acionando a fun√ß√£o **`setConfirmarSenha`**;
- A fun√ß√£o **`setConfirmarSenha`** atualiza o valor do estado **confirmarSenha** com o novo valor digitado;
- O React re-renderiza o input, garantindo que a propriedade **`value`** esteja sempre sincronizada com o estado.

8. Vamos adicionar o **evento `onClick`** para acionar a fun√ß√£o `retornar`, conforme o c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/eGNWziW.png" title="source: imgur.com" /></div>

**Linha 143:** No bot√£o **Cancelar**, adicionamos o evento **`onClick`** para executar a fun√ß√£o **`retornar`**. Observe que o bot√£o √© do tipo **`reset`**, impedindo que o formul√°rio seja enviado.

> O evento **`onClick`** √© disparado sempre que o usu√°rio clica em um elemento HTML. Isso permite adicionar comportamentos espec√≠ficos a elementos como bot√µes, imagens ou links, tornando a intera√ß√£o mais din√¢mica e responsiva.

A fun√ß√£o **`retornar`** utiliza o **hook `useNavigate`** do React Router para redirecionar o usu√°rio de volta √† p√°gina de **login**, cancelando a opera√ß√£o de cadastro de um novo usu√°rio.

<br />

> [!IMPORTANT]
>
> Os eventos **`onSubmit`** e **`onClick`** possuem finalidades diferentes: 
>
> - O evento **`onSubmit`** √© um evento espec√≠fico de formul√°rios e √© acionado quando o usu√°rio tenta enviar o formul√°rio, seja clicando em um bot√£o do tipo `submit` ou pressionando a tecla Enter em um campo de input. Ele permite que o desenvolvedor controle o envio do formul√°rio, valide dados e execute fun√ß√µes antes de realmente enviar os dados. 
> - O evento **`onClick`** √© um evento mais gen√©rico, acionado sempre que um elemento HTML √© clicado, independentemente de ser um bot√£o ou outro tipo de elemento. 
>  
> Enquanto o evento `onSubmit` est√° diretamente ligado ao comportamento de envio de formul√°rios, o evento  `onClick` serve para disparar qualquer a√ß√£o desejada ao interagir com o elemento clicado.

<br />

9. Para finalizar, Vamos adicionar uma **anima√ß√£o de carregamento (loader)** no bot√£o **Cadastrar**, que ser√° inicializada pelo estado **isLoading**, utilizando o c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/SoIQWK5.png" title="source: imgur.com" /></div>

**Linhas 153 a 159:** Utilizando uma **express√£o tern√°ria**, verificamos o valor da propriedade **`isLoading`** para determinar o que ser√° exibido dentro do bot√£o **Cadastrar**.

- Se **`isLoading`** for `true`, o **componente loader `ClipLoader`**, da biblioteca **React Spinners** ser√° exibido, indicando que um processo est√° em andamento, no caso, a chamada √† API para cadastrar o usu√°rio;
- Se **`isLoading`** for `false`, exibimos apenas o texto **Cadastrar**.

Essa l√≥gica garante que o usu√°rio tenha um **feedback visual** durante o envio do formul√°rio, melhorando a experi√™ncia e evitando m√∫ltiplos cliques enquanto a opera√ß√£o est√° sendo processada.

> Toda essa l√≥gica √© aplicada diretamente dentro da tag `<button>` do HTML/TSX.

**A vers√£o final do c√≥digo, est√° dispon√≠vel no link no final da p√°gina.**

<br />

<h2><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="5%"/>Passo 05 - Testar o Componente Cadastro</h2>



1. Abra o Terminal do **Visual Studio Code**.
2. Execute o projeto atrav√©s do comando abaixo:

```
npm run dev
```

3. Pressione a combina√ß√£o de teclas **o + enter** do seu teclado para abrir o Projeto no Navegador.
4. Com o projeto aberto no seu Navegador, a P√°gina de Login ser√° exibida, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/U1JrXfN.png" title="source: imgur.com" /></div>

5. Clique no link **Cadastre-se**, indicado na imagem abaixo, para abrir a P√°gina de Cadastro:

<div align="center"><img src="https://i.imgur.com/zckBHFJ.png" title="source: imgur.com" /></div>

6. Voc√™ deve ser√° redirecionado para a P√°gina de Cadastro.

<div align="center"><img src="https://i.imgur.com/E6xuD6Q.png" title="source: imgur.com" /></div>

7. Preencha os campos do formul√°rio para criar um novo Usu√°rio e na sequ√™ncia clique no bot√£o **Cadastrar**.

<div align="center"><img src="https://i.imgur.com/OPJC567.png" title="source: imgur.com" /></div>

8. Caso o Cadastro do Usu√°rio tenha sido bem sucedido, ser√° exibida a mensagem abaixo:

<div align="center"><img src="https://i.imgur.com/kHQVE3D.png" title="source: imgur.com" /></div>

9. Depois de clicar no bot√£o **OK** da mensagem acima, voc√™ ser√° redirecionado novamente para a **P√°gina de Login**.
10. Caso tenha acontecido algum erro, ser√° exibida a mensagem abaixo:

<div align="center"><img src="https://i.imgur.com/Fw1Escn.png" title="source: imgur.com" /></div>

11. Para verificar qual foi o erro que aconteceu, abra as **Ferramentas de Desenvolvimento** do seu Navegador, clique na op√ß√£o **Rede ou Network** e verifique as mensagens de erro no **Console**, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/qvSjvjh.png" title="source: imgur.com" /></div>

*No exemplo acima, observe que a Requisi√ß√£o retornou um HTTP Status 400 - Bad Request, porque o atributo usuario deve ser um e-mail.*

<br />

## ‚ùåErros comuns:



- **HTTP Status 400 - Bad Request:** Voc√™ est√° tentado persistir dados, que n√£o satisfazem as Regras de Valida√ß√£o do seu Backend. Lembre-se que foram criadas algumas regras de valida√ß√£o para o Objeto Usu√°rio:

| Atributo    | Regras                                                       |
| ----------- | ------------------------------------------------------------ |
| **Nome**    | Preenchimento Obrigat√≥rio <br />N√£o pode ser branco ou nulo  |
| **Usu√°rio** | Preenchimento Obrigat√≥rio <br />N√£o pode ser branco ou nulo <br />Deve ser um endere√ßo de e-mail |
| **Senha**   | Preenchimento Obrigat√≥rio <br />N√£o pode ser branco ou nulo <br />Deve ter no m√≠nimo 8 caracteres |
| **Foto**    | Deve ser um link apontando para a foto<br />O link pode ter no m√°ximo 5000 caracteres |

- **HTTP Status 500 - Internal Server Error:** Geralmente √© retornado quando ocorre algum erro interno no Render, como por exemplo, a sua API ainda n√£o foi inicializada (Passo 01).
- **Erros do React:** Erros relacionados a cria√ß√£o do Componente React. Verifique o seu c√≥digo.

<br />

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react-dom/components#form-components" target="_blank"><b>Documenta√ß√£o: Forms</b></a></div>

<div align="left"><img src="https://i.imgur.com/H9wEgsJ.png" title="source: imgur.com" width="4%"/> <a href="https://pt-br.react.dev/reference/react-dom/components/input" target="_blank"><b>Documenta√ß√£o: Change Event</b></a></div>

<div align="left"><img src="https://i.imgur.com/r9lrbPG.png" title="source: imgur.com" width="4%"/> <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank"><b>Documenta√ß√£o: Fun√ß√µes Ass√≠ncronas</b></a></div>

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="5%"/> <a href="https://github.com/rafaelq80/blogpessoal_react_v19/tree/10_Cadastro_Logica" target="_blank"><b>C√≥digo fonte do projeto</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
